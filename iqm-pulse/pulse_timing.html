
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Pulse timing &#8212; iqm.pulse 9.15.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=63862cf7" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=149b9f8f"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'pulse_timing';</script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="API.html" />
    <link rel="prev" title="Custom gate implementations" href="custom_gates.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="9.15.0" />
    <meta name="docbuild:last-update" content="2025-06-20"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="iqm.pulse 9.15.0 documentation - Home"/>
    <img src="_static/logo.png" class="logo__image only-dark pst-js-only" alt="iqm.pulse 9.15.0 documentation - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_builder.html">Using ScheduleBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_gates.html">Custom gate implementations</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Pulse timing</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="API.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="api/iqm.pulse.html">pulse</a></li>
</ul>
</details></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Pulse timing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#measure-and-readouttrigger">Measure and ReadoutTrigger</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fast-feedback-timing">Fast feedback timing</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="pulse-timing">
<h1>Pulse timing<a class="headerlink" href="#pulse-timing" title="Link to this heading">#</a></h1>
<section id="measure-and-readouttrigger">
<h2>Measure and ReadoutTrigger<a class="headerlink" href="#measure-and-readouttrigger" title="Link to this heading">#</a></h2>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">ReadoutTrigger</span></code> Instruction responsible of qubit readout has several
timing-related attributes.
The <code class="docutils literal notranslate"><span class="pre">measure.constant</span></code> gate implementation produces the lower-level ReadoutTrigger instruction
from a simplified set of settings.
The figure below shows how the settings relate to the more flexible attributes of the instruction.</p>
<img alt="_images/readout_timing.svg" src="_images/readout_timing.svg" /></section>
<section id="fast-feedback-timing">
<h2>Fast feedback timing<a class="headerlink" href="#fast-feedback-timing" title="Link to this heading">#</a></h2>
<p>With conditional Instructions, we specify how the information from readout operations should affect Instructions at
runtime.
Usually, the goal is use the information as soon as possible, but it takes a finite time to propagate from the
acquisition unit to the drive channels that execute the Instructions conditionally.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On all hardware supported by IQM QCCSW, <code class="xref py py-class docutils literal notranslate"><span class="pre">ConditionalInstruction</span></code> reads the signal bit at the time of
excution, regardless of when the signal bit was last updated.
This means that if the Conditionalinstruction is executed too early, the condition will be executed based on the
previous state of the bit.</p>
</div>
<p>To facilitate efficient timing of the feedback signals, IQM Pulse uses virtual channels between probeline channels
(the source of the signals) and drive channels (the destinations).
Block instructions on the virtual channel represent the travel time of the signals.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">CCPRX_Composite</span></code> is GateImplementation of the <code class="docutils literal notranslate"><span class="pre">cc_prx</span></code> (classically controlled PRX) that outputs two
TimeBoxes:
the first one to represent the travel time, and the second one with the actual <code class="xref py py-class docutils literal notranslate"><span class="pre">ConditionalInstruction</span></code>.
In typical use, both should be scheduled in the same order, to ensure the Conditionalinstrucion starts when the
signal bit is available.</p>
<p>The following image illustrates how the TimeBoxes are used for qubits <code class="docutils literal notranslate"><span class="pre">QB2</span></code> and <code class="docutils literal notranslate"><span class="pre">QB3</span></code>.
For QB2, this is also how <code class="xref py py-class docutils literal notranslate"><span class="pre">Reset_Conditional</span></code> implements the <code class="docutils literal notranslate"><span class="pre">reset</span></code> operation.</p>
<p>The equaivalent code would be</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">measure</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">measure</span><span class="p">([</span><span class="s2">&quot;QB2&quot;</span><span class="p">,</span> <span class="s2">&quot;QB3&quot;</span><span class="p">,</span> <span class="s2">&quot;QB4&quot;</span><span class="p">])(</span><span class="n">feedaback_key</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
<span class="n">reset_qb2</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">cc_prx</span><span class="p">([</span><span class="s2">&quot;QB2&quot;</span><span class="p">])(</span><span class="n">feedback_qubit</span><span class="o">=</span><span class="s2">&quot;QB2&quot;</span><span class="p">,</span> <span class="n">feedaback_key</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>  <span class="c1"># 2 timeboxes, use both</span>
<span class="n">set_qb3_to_1</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">cc_prx</span><span class="p">([</span><span class="s2">&quot;QB3&quot;</span><span class="p">])(</span><span class="n">feedback_qubit</span><span class="o">=</span><span class="s2">&quot;QB3&quot;</span><span class="p">,</span> <span class="n">feedaback_key</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="c1"># 2 timeboxes, use both</span>
<span class="n">cc_prx_qb4</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">cc_prx</span><span class="p">([</span><span class="s2">&quot;QB4&quot;</span><span class="p">])(</span><span class="n">feedback_qubit</span><span class="o">=</span><span class="s2">&quot;QB4&quot;</span><span class="p">,</span> <span class="n">feedaback_key</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span> <span class="c1"># 2 timeboxes, use 2nd only</span>

<span class="n">prx_qb3</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">prx</span><span class="p">([</span><span class="s2">&quot;QB3&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">prx_qb4</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">prx</span><span class="p">([</span><span class="s2">&quot;QB4&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">wait</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">wait</span><span class="p">([</span><span class="s2">&quot;QB4&quot;</span><span class="p">],</span> <span class="mf">80e-9</span><span class="p">)</span>

<span class="n">circuit</span> <span class="o">=</span> <span class="n">measure</span> <span class="o">+</span> <span class="n">reset_qb2</span>
<span class="n">circuit</span> <span class="o">+=</span> <span class="n">prx_qb3</span> <span class="o">+</span> <span class="n">set_qb3_to_1</span>
<span class="n">circuit</span> <span class="o">+=</span> <span class="n">prx_qb4</span> <span class="o">+</span> <span class="n">prx_qb4</span> <span class="o">+</span> <span class="n">prx_qb4</span> <span class="o">+</span> <span class="n">wait</span> <span class="o">+</span> <span class="n">prx_qb4</span> <span class="o">+</span> <span class="n">cc_prx_qb4</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<img alt="_images/feedback_timing.svg" src="_images/feedback_timing.svg" /><p>Instructions are spaced out in time only for visual clarity. When scheduled ASAP, they would be left-aligned
such that the ConditionalInstructions start right after the associated <cite>control_delay</cite> has passed.</p>
<p>The bottom of the image illustrates an alternative use of <code class="docutils literal notranslate"><span class="pre">CCPRX_Composite</span></code> to have more freedom in the timing.
There, the optional delay TimeBox is not used for scheduling the Instructions on QB4.
Instead, the user has ensured that the other instructions take enough time for the signal to arrive.
This could be used to act on the <em>previous</em> feedback signal (not shown).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section is not about IQM Pulse itself, but might help in understanding the details of the execution.</p>
</div>
<p>The image below shows a typical timing of a Playlist segment with 2 AWG devices for driving, and a readout instrument.
Here, all statements that apply to an AWG apply to readout instruments as well.
The AWGs can output an arbitrary sequence of pulses, and the readout instrument can additionally read out
the response to the pulses.</p>
<p>With readout, the raw signal response from the readout pulse will be integrated to produce a single number, such as a
complex number or a bit, corresponding to a particular qubit in a particular segment.</p>
<p>In the figure, one of the AWGs has been selected as the trigger master, which means it sends trigger pulses to
start the execution on the slave devices.
As shown in the picture, different delays caused by the travel time of signals can be compensated for by
adjusting the <cite>trigger_delay</cite> setting of each device.</p>
<img alt="_images/pulse_timing.svg" src="_images/pulse_timing.svg" /><p>Settings in the figure that can be adjusted by user in the higher level libraries:</p>
<div class="pst-scrollable-table-container"><table class="full-width table">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 66.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&lt;awg&gt;.trigger_delay</p></td>
<td><p>Wait time between the end of the trigger signal of the AWG master and the beginning of the pulse sequence.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;awg&gt;.trigger_delay (slave)</p></td>
<td><p>Wait time between receiving the trigger signal at the AWG slave and the beginning of the pulse sequence.</p></td>
</tr>
<tr class="row-even"><td><p>options.end_delay</p></td>
<td><p>Wait time between the end of the pulse segment and the next trigger.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;gate&gt;.&lt;implementation&gt;.&lt;locus&gt;.duration</p></td>
<td><p>The duration of the hardware instruction for a gate, possibly rounded to satisfy granularity constraints.
For the <code class="docutils literal notranslate"><span class="pre">ReadoutTrigger</span></code> instruction, the meaning is different, see below.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Other notes:</p>
<ul class="simple">
<li><p>The AWG spcecified by <code class="docutils literal notranslate"><span class="pre">options.trigger_master</span></code> is the only channel that does not wait for a trigger
at the start of a segment.</p></li>
<li><p>Slave AWGs may also emit a trigger pulse to allow daisy chaining trigger signals.</p></li>
<li><p>Systems with IQM Control System are triggered centrally and the channels run independently, and the
<code class="docutils literal notranslate"><span class="pre">options.trigger_master</span></code> has no effect.</p></li>
<li><p>Pipeline delays are delays between the execution of a command and the pulse actually getting outputted
from a device. This delay is caused by the hardware and cannot be changed.
In practice, it can be thought as being part of the cable delays, and thus can be compensated with
<code class="docutils literal notranslate"><span class="pre">trigger_delay</span></code> setting.</p></li>
</ul>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="custom_gates.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Custom gate implementations</p>
      </div>
    </a>
    <a class="right-next"
       href="API.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API Reference</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#measure-and-readouttrigger">Measure and ReadoutTrigger</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fast-feedback-timing">Fast feedback timing</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2019-2025, IQM Finland Oy, Release 9.15.0.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on 2025-06-20.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>